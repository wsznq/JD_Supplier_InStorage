webpackJsonp([19],{gpSZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),s=n.n(i),a=n("mvHQ"),r=n.n(a),o=n("woOf"),u=n.n(o),l=n("exGp"),d=n.n(l),f=n("Dd8w"),c=n.n(f),_=n("7t+N"),v=n.n(_),E=n("NYxO"),h=n("1h8J"),p=n("ignk"),x=n("UNGY"),Z=n("rHil"),g=n("2sLL"),m=n("wpcj"),N=(p.a,x.a,Z.a,g.a,m.a,c()({},Object(E.b)({info:function(t){return t.mutaions.chooseItem},userInfo:function(t){return t.user.userInfo},user:function(t){return t.mutaions.suplierinfo}})),{data:function(){return{value:'{"BarCodeType":"Deli","BillNO":"310000000016"} ',isAll:!1,loadingbut:!1,loadingbuttext:"提交",startDate:"",endDate:"",visibility:!1,visibility2:!1,widths:60,widths2:60,ZREMARK:"",tableHead:["物料编号","物料名称","尺码","本次送货数量","数量","已送货数量","欠数","分配型体","指令","型体","通知单号"],tableHead2:["尺码","本次送货数量","总数量","已送货数量","欠数","分配型体","库位"],form:{MES_HeadsString:[],MES_ItemsString:[]}}},components:{XTable:p.a,Datetime:x.a,Group:Z.a,XButton:g.a,Qrcode:m.a},computed:c()({},Object(E.b)({info:function(t){return t.mutaions.chooseItem},userInfo:function(t){return t.user.userInfo},user:function(t){return t.mutaions.suplierinfo}})),mounted:function(){var t=this;this.total(),this.widths=v()(window).width()/5,this.widths2=v()(window).width()+100,this.$nextTick(function(){t.init()})},methods:{total:function(){var t=0,e=0,n=0,i=0,s=0;this.info.forEach(function(a){t+=parseFloat(a.MENGE),e+=parseFloat(a.YK_NUM),n+=parseFloat(a.WK_NUM),i+=parseFloat(a.ZDELIQTY),s+=parseInt(a.ZREMARK)}),this.info.length>0&&(1===this.info.length?this.info.push({SIZE1:"合计",ZDELIQTY:i.toFixed(3),MENGE:t.toFixed(3),YK_NUM:e.toFixed(3),WK_NUM:n.toFixed(3)}):this.info.push({MATNR:"合计",ZDELIQTY:i.toFixed(3),MENGE:t.toFixed(3),YK_NUM:e.toFixed(3),WK_NUM:n.toFixed(3)}),this.ZNUMPAGE=s)},confirm:function(){var t=this;return d()(s.a.mark(function e(){var n,i,a,o,l,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.info),!(t.info.length<=0)){e.next=4;break}return t.$vux.toast.text("无数据"),e.abrupt("return");case 4:if(""!==t.ZNUMPAGE&&void 0!==t.ZNUMPAGE){e.next=7;break}return t.$vux.toast.text("必须输入总件数"),e.abrupt("return");case 7:if(!isNaN(parseInt(t.ZNUMPAGE))){e.next=10;break}return t.$vux.toast.text("总件数必须为数值"),e.abrupt("return");case 10:if(!(parseInt(t.ZNUMPAGE)<=0)){e.next=13;break}return t.$vux.toast.text("输入总件数不能小于0"),e.abrupt("return");case 13:if(!0!==t.loadingbut){e.next=16;break}return t.$vux.toast.text("提交中..."),e.abrupt("return");case 16:if(t.form.MES_HeadsString=[],(n={BUKRS:"1000",WERKS:"1000",LIFNR:"",ZAUDITOE:"",ZBILLER:"",ZBILLOPENID:"",ZREMARK:"",ZNUMPAGE:""}).ZBILLER=t.user.supplierInfo.FContact,n.ZBILLOPENID=t.userInfo,n.LIFNR=t.info[0].LIFNR,n.ZREMARK=t.ZREMARK,n.ZNUMPAGE=t.ZNUMPAGE,t.form.MES_ItemsString=[],i={EBELN:"",EBELP:"",ETENR:"",MATNR:"",VBELN:"",ZCOMMUNIT:"",ZDELIADDRESS:"",ZDELIQTY:"",ZZGCXT:"",ZXT:"",ZREMARK:""},a=[],o=[],l=0,t.info.forEach(function(e,s){if(s!==t.info.length-1){for(var r in e)if("ZZXTNO"===r)i.ZZGCXT=e[r];else if("ZXT"===r)i.ZXT=e[r];else if("MEINS"===r)i.ZCOMMUNIT=e[r];else if("ZQY"===r)i.ZDELIADDRESS=e[r];else if("BUKRS"===r){if(n.BUKRS=e[r],a.push(n.BUKRS),a.indexOf(n.BUKRS)){t.$vux.toast.text("存在不同公司代码"),console.log("存在不同公司代码"),l=1;break}}else if("WERKS"===r){if(n.WERKS=e[r],o.push(n.WERKS),o.indexOf(n.WERKS)){t.$vux.toast.text("存在不同工厂"),console.log("存在不同工厂"),l=2;break}}else i[r]=e[r];t.form.MES_ItemsString.push(i),i=u()({},{EBELN:"",EBELP:"",ETENR:"",MATNR:"",VBELN:"",ZCOMMUNIT:"",ZDELIADDRESS:"",ZDELIQTY:"",ZZGCXT:"",ZXT:"",ZREMARK:""})}}),1!==l){e.next=32;break}return t.$vux.toast.text("存在不同公司代码"),e.abrupt("return");case 32:if(2!==l){e.next=35;break}return t.$vux.toast.text("存在不同工厂"),e.abrupt("return");case 35:return console.log(t.form.MES_HeadsString),t.form.MES_HeadsString.push(n),t.form.MES_HeadsString=r()(t.form.MES_HeadsString),t.form.MES_ItemsString=r()(t.form.MES_ItemsString),e.prev=39,t.loadingbut=!0,t.loadingbuttext="提交中...",e.next=44,Object(h.u)(t.form);case 44:d=e.sent,t.$vux.toast.text(d),t.$store.commit("SET_CHOOSEITEM",[]),t.info=[],t.loadingbut=!1,t.loadingbuttext="提交",t.$router.push({path:"/result",query:{No:d.replace(/[^0-9]/gi,"")}}),e.next=58;break;case 53:e.prev=53,e.t0=e.catch(39),console.log(e.t0),t.loadingbut=!1,t.loadingbuttext="提交";case 58:case"end":return e.stop()}},e,t,[[39,53]])}))()},vueTouch:function(t){"INPUT"!==t.target.tagName&&console.log(t)},toInfo:function(t){console.log(t)},change:function(){},init:function(){var t=v()(window),e=v()(".t_r_content"),n=v()(".t_l_freeze"),i=n.find("table"),s=v()(".t_r_t table"),a=this,r=void 0;function o(){t.height();r=1===a.info.length?40:40*(a.info.length<10?a.info.length:10),console.log(r),n.height(r),e.height(r)}o(),t.on("resize",o);var u=new IScroll(".t_r_content",{scrollX:!0,scrollY:!0,probeType:3});function l(){var t=this.y,e=this.x;i.css("transform","translate(0px, "+t+"px) translateZ(0px)"),s.css("transform","translate("+e+"px, 0px) translateZ(0px)")}e.on("touchmove mousewheel",function(t){t.preventDefault()}),u.on("scroll",l),u.on("scrollEnd",l)}}}),M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap",attrs:{id:"wrap"}},[2===t.info.length?n("div",{staticClass:"item-top"},[n("div",{staticClass:"item"},[t.info[0].VBELN?n("div",{staticClass:"item-left"},[t._v("指令： "+t._s(t.info[0].VBELN))]):t._e(),t._v(" "),t.info[0].ZZXTNO?n("div",{staticClass:"item-right"},[t._v("型体："+t._s(t.info[0].ZZXTNO))]):t._e()]),t._v(" "),n("div",{staticClass:"item mt20"},[n("div",{staticClass:"item-left"},[t._v("收料通知单号："+t._s(t.info[0].EBELN))]),t._v(" "),n("div",{staticClass:"item-right"},[t._v("物料："+t._s(t.info[0].MATNR)+"-"+t._s(t.info[0].MAKTX_YB))])])]):t._e(),t._v(" "),n("div",{staticClass:"data-table"},[n("div",{staticClass:"t_r"},[n("div",{staticClass:"t_r_t"},[n("table",{style:2===t.info.length?"width: "+(t.widths2+40)+"px":"width: 1210px"},[n("tbody",[2!==t.info.length?n("tr",t._l(t.tableHead,function(e,i){return n("th",{key:i,attrs:{width:"110"}},[t._v(t._s(e))])}),0):n("tr",t._l(t.tableHead2,function(e,i){return n("th",{key:i,attrs:{width:"110"}},[t._v(t._s(e))])}),0)])])]),t._v(" "),n("div",{staticClass:"t_r_content"},[n("table",{style:2===t.info.length?"width: "+(t.widths2+40)+"px ":"width: 1210px"},[n("tbody",{directives:[{name:"tap",rawName:"v-tap",value:function(e){return t.vueTouch(e)},expression:"(e)=>vueTouch(e)"}]},t._l(t.info,function(e,i){return n("tr",{key:i,staticClass:"to",attrs:{id:i}},[2!==t.info.length?n("td",{attrs:{width:"110"}},[t._v(t._s(e.MATNR))]):t._e(),t._v(" "),2!==t.info.length?n("td",{attrs:{width:"110"}},[t._v(t._s(e.MAKTX_YB))]):t._e(),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.SIZE1))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.ZDELIQTY))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.MENGE))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.YK_NUM))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.WK_NUM))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.ZXT))]),t._v(" "),n("td",{attrs:{width:"110"}},[t._v(t._s(e.ZLGORT)+t._s(e.LGOBE))]),t._v(" "),2!==t.info.length?n("td",{attrs:{width:"110"}},[t._v(t._s(e.VBELN))]):t._e(),t._v(" "),2!==t.info.length?n("td",{attrs:{width:"110"}},[t._v(t._s(e.ZZXTNO))]):t._e(),t._v(" "),2!==t.info.length?n("td",{attrs:{width:"110"}},[t._v(t._s(e.EBELN))]):t._e()])}),0)])])]),t._v(" "),n("div",{staticClass:"t_r Remarks"},[n("table",[n("tr",[n("td",{attrs:{width:"120"}},[t._v("总件数")]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.ZNUMPAGE,expression:"ZNUMPAGE"}],staticStyle:{width:"100px"},attrs:{type:"number",placeholder:"总件数必须输入",disabled:"disabled"},domProps:{value:t.ZNUMPAGE},on:{input:function(e){e.target.composing||(t.ZNUMPAGE=e.target.value)}}})]),t._v(" "),n("td",{attrs:{width:"160"}},[t._v("表头备注")]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.ZREMARK,expression:"ZREMARK"}],attrs:{type:"text",placeholder:"表头备注输入"},domProps:{value:t.ZREMARK},on:{input:function(e){e.target.composing||(t.ZREMARK=e.target.value)}}})])])])])]),t._v(" "),n("x-button",{staticClass:"comfirm",attrs:{gradients:["#d93309","#aa0000"]},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v(t._s(t.loadingbuttext))])],1)},staticRenderFns:[]};var b=n("VU/8")(N,M,!1,function(t){n("jrga")},"data-v-d2ae1198",null);e.default=b.exports},jrga:function(t,e){}});
//# sourceMappingURL=19.6bf267e8ab357c4fbe94.js.map